<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Formulaire Process ‚Äì Diagnostic terrain</title>
    <link rel="stylesheet" href="styles.css" />
    <script defer src="script.js"></script>
  </head>
  <body>
    <header class="app-header">
      <div class="container">
        <h1>Diagnostic Process ‚Äì Formulaire</h1>
        <p class="subtitle">Formulaire standardis√© pour qualifier et prioriser les cas d'usage</p>
      </div>
    </header>

    <main class="container">
      <form id="process-form" novalidate>
        <nav class="wizard" aria-label="Navigation par chapitres">
          <ol class="wizard-steps" role="tablist">
            <li><button type="button" class="wizard-step" onclick="window.goToStep(1)" data-step="1">üë§ 1. Persona</button></li>
            <li><button type="button" class="wizard-step" onclick="window.goToStep(2)" data-step="2">üí° 2. Besoin</button></li>
            <li><button type="button" class="wizard-step" onclick="window.goToStep(3)" data-step="3">üìä 3. Volum√©trie</button></li>
            <li><button type="button" class="wizard-step" onclick="window.goToStep(4)" data-step="4">üîß 4. Nature</button></li>
            <li><button type="button" class="wizard-step" onclick="window.goToStep(5)" data-step="5">üëÄ 5. Synth√®se</button></li>
          </ol>
          <div class="progress"><div id="progress-fill" class="progress-fill" style="width: 20%"></div></div>
        </nav>

        <section class="step-section is-active" data-step="1" aria-labelledby="bloc-1">
          <h2 id="bloc-1">1. Persona</h2>
          <p class="hint">Informations sur l'utilisateur final qui b√©n√©ficiera de l'automatisation.</p>
          
          <div class="form-group">
            <label for="q1">Q1. Nom de l'utilisateur final</label>
            <input type="text" id="q1" name="q1" placeholder="Ex: Dupont" required />
          </div>
          
          <div class="form-group">
            <label for="q2">Q2. Pr√©nom de l'utilisateur final</label>
            <input type="text" id="q2" name="q2" placeholder="Ex: Marie" required />
          </div>
          
          <div class="form-group">
            <label for="q3">Q3. R√¥le / Fonction</label>
            <input type="text" id="q3" name="q3" placeholder="Ex: Gestionnaire de commandes, Comptable..." required />
          </div>
          
          <div class="form-group">
            <label for="q4">Q4. D√©partement</label>
            <select id="q4" name="q4">
              <option value="">‚Äî S√©lectionnez ‚Äî</option>
              <option value="Achats">Achats</option>
              <option value="Commerce / Ventes">Commerce / Ventes</option>
              <option value="Comptabilit√© / Finance">Comptabilit√© / Finance</option>
              <option value="Direction">Direction</option>
              <option value="DSI / IT">DSI / IT</option>
              <option value="Juridique">Juridique</option>
              <option value="Logistique / Supply Chain">Logistique / Supply Chain</option>
              <option value="Marketing">Marketing</option>
              <option value="Production / Op√©rations">Production / Op√©rations</option>
              <option value="Qualit√©">Qualit√©</option>
              <option value="Ressources Humaines">Ressources Humaines</option>
              <option value="Service Client">Service Client</option>
              <option value="Autre">Autre</option>
            </select>
          </div>
        </section>

        <section class="step-section" data-step="2" aria-labelledby="bloc-2">
          <h2 id="bloc-2">2. Contexte & Besoin</h2>
          <p class="hint">D√©crivez le contexte et le besoin utilisateur. L'IA analysera automatiquement les pain points et b√©n√©fices.</p>

          <div class="form-group">
            <label for="q5">Q5. Brief utilisateur - Contexte et besoin</label>
            <p class="hint">Soyez concret et donnez des exemples !</p>
            <textarea id="q5" name="q5" rows="6" placeholder="D√©crivez :&#10;‚Ä¢ Quelle est la situation actuelle ?&#10;‚Ä¢ Quel est le probl√®me rencontr√© ?&#10;‚Ä¢ Quel serait le r√©sultat souhait√© apr√®s automatisation ?&#10;&#10;Exemple : 'Actuellement, je re√ßois 50 factures par jour par e-mail. Je dois manuellement extraire les donn√©es (montant, fournisseur, date) et les saisir dans notre ERP. C'est long, r√©p√©titif et source d'erreurs. Je voudrais que ces donn√©es soient automatiquement extraites et int√©gr√©es dans l'ERP.'" required></textarea>
          </div>

          <div class="form-group">
            <label for="q6">Q6. Comment la t√¢che est-elle ex√©cut√©e aujourd'hui ?</label>
            <p class="hint">D√©crivez les √©tapes principales de l'ex√©cution actuelle.</p>
            <textarea id="q6" name="q6" rows="5" placeholder="Exemple :&#10;1. R√©ception e-mail avec facture PDF&#10;2. Ouverture du PDF et extraction manuelle des donn√©es&#10;3. Saisie dans Excel pour v√©rification&#10;4. Import dans l'ERP&#10;5. Envoi d'un e-mail de confirmation" required></textarea>
          </div>
        </section>

        <section class="step-section" data-step="3" aria-labelledby="bloc-3">
          <h2 id="bloc-3">3. Volum√©trie & Impact</h2>

          <fieldset class="form-group">
            <legend>Q7. Fr√©quence du besoin</legend>
            <p class="hint">√Ä quelle fr√©quence le besoin se pr√©sente-t-il ?</p>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q7" value="Plusieurs fois par jour" /> Plusieurs fois par jour</label>
              <label><input type="radio" name="q7" value="Quotidien" /> Quotidien</label>
              <label><input type="radio" name="q7" value="Hebdomadaire" /> Hebdomadaire</label>
              <label><input type="radio" name="q7" value="Mensuel" /> Mensuel</label>
              <label><input type="radio" name="q7" value="Occasionnel" /> Occasionnel</label>
            </div>
          </fieldset>

          <fieldset class="form-group">
            <legend>Q8. Nombre d'ex√©cutions de la t√¢che √† chaque occurrence</legend>
            <p class="hint">Quand le besoin se pr√©sente, combien de fois la t√¢che est-elle ex√©cut√©e ?</p>
            <p class="hint-examples">üí° Exemple : Si c'est mensuel (cl√¥ture comptable), est-ce 1 fois, 20 fois, 100 fois ce jour-l√† ?</p>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q8" value="1" /> 1 seule fois</label>
              <label><input type="radio" name="q8" value="2-10" /> 2-10 fois</label>
              <label><input type="radio" name="q8" value="11-50" /> 11-50 fois</label>
              <label><input type="radio" name="q8" value="51-200" /> 51-200 fois</label>
              <label><input type="radio" name="q8" value="200+" /> 200+ fois</label>
            </div>
          </fieldset>

          <fieldset class="form-group">
            <legend>Q9. Temps d'ex√©cution unitaire de la t√¢che</legend>
            <p class="hint">Combien de temps prend UNE ex√©cution de la t√¢che ?</p>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q9" value="< 10 min" /> < 10 min</label>
              <label><input type="radio" name="q9" value="10-30 min" /> 10-30 min</label>
              <label><input type="radio" name="q9" value="30 min - 1h" /> 30 min - 1h</label>
              <label><input type="radio" name="q9" value="1-2h" /> 1-2h</label>
              <label><input type="radio" name="q9" value="> 2h" /> > 2h</label>
            </div>
          </fieldset>

          <fieldset class="form-group">
            <legend>Q10. Nombre actuel de personnes ex√©cutant cette t√¢che</legend>
            <p class="hint">Combien de personnes r√©alisent actuellement cette t√¢che ?</p>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q10" value="1" /> 1 personne</label>
              <label><input type="radio" name="q10" value="2-5" /> 2-5 personnes</label>
              <label><input type="radio" name="q10" value="6-20" /> 6-20 personnes</label>
              <label><input type="radio" name="q10" value="21-50" /> 21-50 personnes</label>
              <label><input type="radio" name="q10" value="50+" /> 50+ personnes</label>
            </div>
          </fieldset>

          <fieldset class="form-group">
            <legend>Q11. Niveau d'irritant / urgence</legend>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q11" value="1" /> 1 ‚Äî Faible g√™ne</label>
              <label><input type="radio" name="q11" value="2" /> 2 ‚Äî Mod√©r√©</label>
              <label><input type="radio" name="q11" value="3" checked /> 3 ‚Äî Important</label>
              <label><input type="radio" name="q11" value="4" /> 4 ‚Äî Critique</label>
              <label><input type="radio" name="q11" value="5" /> 5 ‚Äî Bloquant</label>
            </div>
          </fieldset>

          <div class="form-group">
            <label for="q11a">Q11a. Pourquoi est-ce irritant ?</label>
            <textarea id="q11a" name="q11a" rows="2" placeholder="Ex: T√¢che r√©p√©titive sans valeur ajout√©e, nombreuses erreurs de saisie..."></textarea>
          </div>

          <div class="form-group">
            <label for="q11b">Q11b. Pourquoi est-ce urgent ?</label>
            <textarea id="q11b" name="q11b" rows="2" placeholder="Ex: Impact direct sur satisfaction client, risque de non-conformit√©..."></textarea>
          </div>
        </section>

        <section class="step-section" data-step="4" aria-labelledby="bloc-4">
          <h2 id="bloc-4">4. Nature de la t√¢che</h2>

          <div class="form-group">
            <label for="q12">Q12. Quelles donn√©es num√©riques sont manipul√©es pendant la t√¢che ?</label>
            <p class="hint-examples">üí° Exemples : Fichiers Excel, bases de donn√©es, PDF, documents Word, images, fichiers papier scann√©s, audio, e-mails...</p>
            <textarea id="q12" name="q12" rows="3" placeholder="Ex: Fichiers Excel avec donn√©es clients, factures PDF, e-mails de confirmation"></textarea>
          </div>

          <fieldset class="form-group">
            <legend>Q13. La t√¢che inclut-elle une action manuelle ?</legend>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q13" value="Oui" /> Oui</label>
              <label><input type="radio" name="q13" value="Non" /> Non</label>
            </div>
          </fieldset>

          <div class="form-group">
            <label for="q13a">Q13a. Si oui, donnez un exemple d'action manuelle</label>
            <textarea id="q13a" name="q13a" rows="2" placeholder="Ex: Copier-coller de donn√©es entre Excel et SAP, v√©rification visuelle de coh√©rence, saisie manuelle de codes..."></textarea>
          </div>

          <fieldset class="form-group">
            <legend>Q14. La t√¢che peut-elle √™tre reproduite avec des r√®gles simples et stables ?</legend>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q14" value="Oui" /> Oui ‚Äî R√®gles claires et stables</label>
              <label><input type="radio" name="q14" value="Partiellement" /> Partiellement ‚Äî Quelques cas particuliers</label>
              <label><input type="radio" name="q14" value="Non" /> Non ‚Äî Beaucoup d'exceptions, jugement m√©tier important</label>
            </div>
          </fieldset>

          <div class="form-group">
            <label for="q14a">Q14a. Si partiellement ou non, donnez un exemple de la r√®gle/cas le plus complexe</label>
            <textarea id="q14a" name="q14a" rows="2" placeholder="Ex: Certains fournisseurs envoient des formats diff√©rents, n√©cessite validation manager si montant > 10k‚Ç¨..."></textarea>
          </div>

          <fieldset class="form-group">
            <legend>Q15. Complexit√© organisationnelle</legend>
            <p class="hint">La t√¢che n√©cessite-t-elle la coordination ou validation d'autres personnes ?</p>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q15" value="Simple" /> Simple ‚Äî Une personne peut faire la t√¢che seule</label>
              <label><input type="radio" name="q15" value="Moyenne" /> Moyenne ‚Äî N√©cessite une validation d'une autre personne</label>
              <label><input type="radio" name="q15" value="Complexe" /> Complexe ‚Äî Coordination de plusieurs personnes/services</label>
            </div>
          </fieldset>

          <div class="form-group">
            <label for="q16">Q16. Quels sont les outils n√©cessaires pour r√©aliser cette t√¢che ?</label>
            <input type="text" id="q16" name="q16" placeholder="Ex: Excel + SAP + e-mails, Salesforce + Google Sheets..." />
          </div>
        </section>

        <section class="conformite meta-section" hidden>
          <h3>Conformit√© au cahier des charges</h3>
          <ul>
            <li>üß≠ Structure standardis√©e ‚Üí 4 blocs clairs, identiques pour tous.</li>
            <li>üìä Crit√®res comparables ‚Üí √âchelles, fourchettes, cases √† cocher normalis√©es.</li>
            <li>üßÆ Scoring possible ‚Üí Temps, irritants, volum√©trie, impact structur√©s.</li>
            <li>üë§ Accessible terrain ‚Üí Formulation m√©tier + ¬´ Pourquoi ¬ª.</li>
            <li>‚è≥ Rapide √† remplir ‚Üí 21 questions max, majoritairement choix multiples.</li>
            <li>ü™´ Mesure des irritants ‚Üí Q12 + Q13 d√©di√©es.</li>
            <li>üöÄ Actionnable delivery ‚Üí Parties prenantes + volum√©trie + co√ªts + impact.</li>
            <li>üß≠ D√©cision rapide ‚Üí Go / No Go priorisable d√®s r√©ception.</li>
          </ul>
        </section>

        <section class="retours meta-section" hidden>
          <h3>Int√©gration des retours Edith</h3>
          <ul>
            <li>‚úÖ Impact direct / indirect ‚Üí Q16</li>
            <li>‚úÖ Inversion Q14/Q15 pour logique impact ‚Üí gains</li>
            <li>‚úÖ Co√ªts directs / indirects ‚Üí Q17</li>
            <li>‚úÖ Formulaire orient√© diagnostic terrain ‚Üí pas strat√©gique lourd</li>
            <li>‚úÖ Pr√©cision sur b√©n√©fices et port√©e ‚Üí Q14 enrichie</li>
          </ul>
        </section>

        <section class="step-section" data-step="5" aria-labelledby="bloc-5">
          <h2 id="bloc-5">üëÄ Synth√®se</h2>

          <article class="panel recap">
            <h3>üßæ R√©capitulatif</h3>
            <div id="recap-content" class="recap-content">
              <!-- Rendu dynamique -->
            </div>
          </article>

          <article class="panel editable-recap" hidden>
            <div class="ai-header">
              <h3>‚úèÔ∏è User Story & Validation</h3>
              <div class="ai-controls">
                <button type="button" id="generate-user-story" class="secondary">G√©n√©rer User Story</button>
              </div>
            </div>
            <div class="form-group">
              <label for="user-story">User Story √©ditable</label>
              <p class="hint">Format : "En tant que [r√¥le], je veux [action] afin de [b√©n√©fice]"</p>
              <textarea id="user-story" name="user_story" rows="4" placeholder="En tant que gestionnaire de commandes, je veux automatiser la saisie des factures afin de r√©duire les erreurs et gagner 2h par jour."></textarea>
            </div>
            <div class="form-group">
              <label for="validation-notes">Notes de validation / Commentaires</label>
              <textarea id="validation-notes" name="validation_notes" rows="3" placeholder="Points √† valider, contraintes identifi√©es, prochaines √©tapes..."></textarea>
            </div>
          </article>

          <article class="panel ai" hidden>
            <div class="ai-header">
              <h3>üß† Synth√®se IA</h3>
              <div class="ai-controls">
                <details>
                  <summary>‚öôÔ∏è Param√®tres IA (optionnels)</summary>
                  <div class="ai-settings">
                    <label for="ai-backend-url">Backend IA (proxy s√©curis√©)</label>
                    <input type="url" id="ai-backend-url" placeholder="http://localhost:5050/ai" />
                    <p class="hint">Cl√© OpenAI stock√©e c√¥t√© serveur. Voir README pour lancer le backend.</p>
                    <button type="button" id="ai-save-settings" class="ghost">Enregistrer param√®tres</button>
                  </div>
                </details>
                <button type="button" id="ai-synthese-btn" class="secondary">G√©n√©rer une synth√®se</button>
              </div>
            </div>
            <div id="ai-synthese-output" class="ai-output rich" aria-live="polite"></div>
          </article>

          <div class="score-cards" hidden>
            <article class="score-card">
              <h3>ü™ô Score "Gains" <span class="small">/20</span></h3>
              <div class="metric"><span>Temps/Co√ªts (Q15‚ÄìQ17)</span><span id="score-gains-tc">‚Äî</span></div>
              <div class="bar"><div id="bar-gains-tc" class="bar-fill" style="width:0%"></div></div>
              <div class="metric"><span>Impact (Q14)</span><span id="score-gains-impact">‚Äî</span></div>
              <div class="bar"><div id="bar-gains-impact" class="bar-fill" style="width:0%"></div></div>
              <div class="metric total"><span>Total</span><span id="score-gains">‚Äî</span></div>
            </article>

            <article class="score-card">
              <h3>‚ö° Irritants & Urgence <span class="small">/20</span></h3>
              <div class="metric"><span>Irritant (Q12)</span><span id="score-irr-q12">‚Äî</span></div>
              <div class="bar"><div id="bar-irr-q12" class="bar-fill" style="width:0%"></div></div>
              <div class="metric"><span>Volum√©trie (Q7‚ÄìQ11)</span><span id="score-irr-vol">‚Äî</span></div>
              <div class="bar"><div id="bar-irr-vol" class="bar-fill" style="width:0%"></div></div>
              <div class="metric total"><span>Total</span><span id="score-irritants">‚Äî</span></div>
            </article>

            <article class="score-card">
              <h3>üßÆ Faisabilit√© <span class="small">/20</span></h3>
              <div class="metric"><span>Caract√©ristiques (Q13)</span><span id="score-fais-feat">‚Äî</span></div>
              <div class="bar"><div id="bar-fais-feat" class="bar-fill" style="width:0%"></div></div>
              <div class="metric"><span>Simplicit√© per√ßue</span><span id="score-fais-simp">‚Äî</span></div>
              <div class="bar"><div id="bar-fais-simp" class="bar-fill" style="width:0%"></div></div>
              <div class="metric total"><span>Total</span><span id="score-faisabilite">‚Äî</span></div>
            </article>

            <article class="score-card highlight">
              <h3>üèÅ Score Global Priorit√© <span class="small">/100</span></h3>
              <div class="metric mega"><span id="score-global">‚Äî</span></div>
              <div class="bar big"><div id="bar-global" class="bar-fill" style="width:0%"></div></div>
              <p class="badge" id="score-category">‚Äî</p>
            </article>
          </div>
          <p class="hint" hidden>Classes recommand√©es: üü¢ Quick win ¬∑ üü° √Ä challenger ¬∑ üî¥ Long shot</p>

          <article class="panel ai" hidden>
            <div class="ai-header">
              <h3>üöö Delivery IA</h3>
              <div class="ai-controls">
                <button type="button" id="ai-delivery-btn" class="secondary">G√©n√©rer Delivery</button>
              </div>
            </div>
            <div id="ai-delivery-output" class="ai-output rich"></div>
          </article>
        </section>

        <div class="pager" role="navigation" aria-label="Navigation du formulaire">
          <button type="button" id="prev-step" class="ghost" onclick="window.goPrev()">‚Üê Pr√©c√©dent</button>
          <div class="spacer"></div>
          <button type="button" id="next-step" class="primary" onclick="window.goNext()">Suivant ‚Üí</button>
        </div>

      </form>
    </main>

    <footer class="app-footer">
      <div class="container">
        <p>¬© 2025 Diagnostic Process ‚Äî Pr√™t pour la priorisation automatis√©e des use cases üöÄ</p>
      </div>
    </footer>

  </body>
  </html>


