<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Formulaire Process â€“ Diagnostic terrain</title>
    <link rel="stylesheet" href="styles.css" />
    <script defer src="script.js"></script>
  </head>
  <body>
    <header class="app-header">
      <div class="container">
        <h1>Diagnostic Process â€“ Formulaire</h1>
        <p class="subtitle">Formulaire standardisÃ© pour qualifier et prioriser les cas d'usage</p>
      </div>
    </header>

    <main class="container">
      <form id="process-form" novalidate>
        <nav class="wizard" aria-label="Navigation par chapitres">
          <ol class="wizard-steps" role="tablist">
            <li><button type="button" class="wizard-step" onclick="window.goToStep(1)" data-step="1">ğŸ‘¤ 1. Persona</button></li>
            <li><button type="button" class="wizard-step" onclick="window.goToStep(2)" data-step="2">ğŸ’¡ 2. Besoin</button></li>
            <li><button type="button" class="wizard-step" onclick="window.goToStep(3)" data-step="3">ğŸ“Š 3. VolumÃ©trie</button></li>
            <li><button type="button" class="wizard-step" onclick="window.goToStep(4)" data-step="4">ğŸ”§ 4. Nature</button></li>
            <li><button type="button" class="wizard-step" onclick="window.goToStep(5)" data-step="5">ğŸ‘€ 5. SynthÃ¨se</button></li>
          </ol>
          <div class="progress"><div id="progress-fill" class="progress-fill" style="width: 20%"></div></div>
        </nav>

        <section class="step-section is-active" data-step="1" aria-labelledby="bloc-1">
          <h2 id="bloc-1">1. Persona</h2>
          <p class="hint">Informations sur l'utilisateur final qui bÃ©nÃ©ficiera de l'automatisation.</p>
          
          <div class="form-group">
            <label for="q1">Q1. Nom de l'utilisateur final</label>
            <input type="text" id="q1" name="q1" placeholder="Ex: Dupont" required />
          </div>
          
          <div class="form-group">
            <label for="q2">Q2. PrÃ©nom de l'utilisateur final</label>
            <input type="text" id="q2" name="q2" placeholder="Ex: Marie" required />
          </div>
          
          <div class="form-group">
            <label for="q3">Q3. RÃ´le / Fonction</label>
            <input type="text" id="q3" name="q3" placeholder="Ex: Gestionnaire de commandes, Comptable..." required />
          </div>
          
          <div class="form-group">
            <label for="q4">Q4. DÃ©partement</label>
            <select id="q4" name="q4">
              <option value="">â€” SÃ©lectionnez â€”</option>
              <option value="Achats">Achats</option>
              <option value="Commerce / Ventes">Commerce / Ventes</option>
              <option value="ComptabilitÃ© / Finance">ComptabilitÃ© / Finance</option>
              <option value="Direction">Direction</option>
              <option value="DSI / IT">DSI / IT</option>
              <option value="Juridique">Juridique</option>
              <option value="Logistique / Supply Chain">Logistique / Supply Chain</option>
              <option value="Marketing">Marketing</option>
              <option value="Production / OpÃ©rations">Production / OpÃ©rations</option>
              <option value="QualitÃ©">QualitÃ©</option>
              <option value="Ressources Humaines">Ressources Humaines</option>
              <option value="Service Client">Service Client</option>
              <option value="Autre">Autre</option>
            </select>
          </div>
        </section>

        <section class="step-section" data-step="2" aria-labelledby="bloc-2">
          <h2 id="bloc-2">2. Contexte & Besoin</h2>
          <p class="hint">DÃ©crivez le contexte et le besoin utilisateur. L'IA analysera automatiquement les pain points et bÃ©nÃ©fices.</p>

          <div class="form-group">
            <label for="q5">Q5. Brief utilisateur - Contexte et besoin</label>
            <p class="hint">Soyez concret et donnez des exemples !</p>
            <textarea id="q5" name="q5" rows="6" placeholder="DÃ©crivez :&#10;â€¢ Quelle est la situation actuelle ?&#10;â€¢ Quel est le problÃ¨me rencontrÃ© ?&#10;â€¢ Quel serait le rÃ©sultat souhaitÃ© aprÃ¨s automatisation ?&#10;&#10;Exemple : 'Actuellement, je reÃ§ois 50 factures par jour par e-mail. Je dois manuellement extraire les donnÃ©es (montant, fournisseur, date) et les saisir dans notre ERP. C'est long, rÃ©pÃ©titif et source d'erreurs. Je voudrais que ces donnÃ©es soient automatiquement extraites et intÃ©grÃ©es dans l'ERP.'" required></textarea>
          </div>

          <div class="form-group">
            <label for="q6">Q6. Comment la tÃ¢che est-elle exÃ©cutÃ©e aujourd'hui ?</label>
            <p class="hint">DÃ©crivez les Ã©tapes principales de l'exÃ©cution actuelle.</p>
            <textarea id="q6" name="q6" rows="5" placeholder="Exemple :&#10;1. RÃ©ception e-mail avec facture PDF&#10;2. Ouverture du PDF et extraction manuelle des donnÃ©es&#10;3. Saisie dans Excel pour vÃ©rification&#10;4. Import dans l'ERP&#10;5. Envoi d'un e-mail de confirmation" required></textarea>
          </div>
        </section>

        <section class="step-section" data-step="3" aria-labelledby="bloc-3">
          <h2 id="bloc-3">3. VolumÃ©trie & Impact</h2>

          <fieldset class="form-group">
            <legend>Q7. FrÃ©quence du besoin</legend>
            <p class="hint">Ã€ quelle frÃ©quence le besoin se prÃ©sente-t-il ?</p>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q7" value="Plusieurs fois par jour" /> Plusieurs fois par jour</label>
              <label><input type="radio" name="q7" value="Quotidien" /> Quotidien</label>
              <label><input type="radio" name="q7" value="Hebdomadaire" /> Hebdomadaire</label>
              <label><input type="radio" name="q7" value="Mensuel" /> Mensuel</label>
              <label><input type="radio" name="q7" value="Occasionnel" /> Occasionnel</label>
            </div>
          </fieldset>

          <fieldset class="form-group">
            <legend>Q8. Nombre d'exÃ©cutions de la tÃ¢che Ã  chaque occurrence</legend>
            <p class="hint">Quand le besoin se prÃ©sente, combien de fois la tÃ¢che est-elle exÃ©cutÃ©e ?</p>
            <p class="hint-examples">ğŸ’¡ Exemple : Si c'est mensuel (clÃ´ture comptable), est-ce 1 fois, 20 fois, 100 fois ce jour-lÃ  ?</p>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q8" value="1" /> 1 seule fois</label>
              <label><input type="radio" name="q8" value="2-10" /> 2-10 fois</label>
              <label><input type="radio" name="q8" value="11-50" /> 11-50 fois</label>
              <label><input type="radio" name="q8" value="51-200" /> 51-200 fois</label>
              <label><input type="radio" name="q8" value="200+" /> 200+ fois</label>
            </div>
          </fieldset>

          <fieldset class="form-group">
            <legend>Q9. Temps d'exÃ©cution unitaire de la tÃ¢che</legend>
            <p class="hint">Combien de temps prend UNE exÃ©cution de la tÃ¢che ?</p>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q9" value="< 10 min" /> < 10 min</label>
              <label><input type="radio" name="q9" value="10-30 min" /> 10-30 min</label>
              <label><input type="radio" name="q9" value="30 min - 1h" /> 30 min - 1h</label>
              <label><input type="radio" name="q9" value="1-2h" /> 1-2h</label>
              <label><input type="radio" name="q9" value="> 2h" /> > 2h</label>
            </div>
          </fieldset>

          <fieldset class="form-group">
            <legend>Q10. Nombre actuel de personnes exÃ©cutant cette tÃ¢che</legend>
            <p class="hint">Combien de personnes rÃ©alisent actuellement cette tÃ¢che ?</p>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q10" value="1" /> 1 personne</label>
              <label><input type="radio" name="q10" value="2-5" /> 2-5 personnes</label>
              <label><input type="radio" name="q10" value="6-20" /> 6-20 personnes</label>
              <label><input type="radio" name="q10" value="21-50" /> 21-50 personnes</label>
              <label><input type="radio" name="q10" value="50+" /> 50+ personnes</label>
            </div>
          </fieldset>

          <fieldset class="form-group">
            <legend>Q11. Niveau d'irritant / urgence</legend>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q11" value="1" /> 1 â€” Faible gÃªne</label>
              <label><input type="radio" name="q11" value="2" /> 2 â€” ModÃ©rÃ©</label>
              <label><input type="radio" name="q11" value="3" checked /> 3 â€” Important</label>
              <label><input type="radio" name="q11" value="4" /> 4 â€” Critique</label>
              <label><input type="radio" name="q11" value="5" /> 5 â€” Bloquant</label>
            </div>
          </fieldset>

          <div class="form-group">
            <label for="q11a">Q11a. Pourquoi est-ce irritant ?</label>
            <textarea id="q11a" name="q11a" rows="2" placeholder="Ex: TÃ¢che rÃ©pÃ©titive sans valeur ajoutÃ©e, nombreuses erreurs de saisie..."></textarea>
          </div>

          <div class="form-group">
            <label for="q11b">Q11b. Pourquoi est-ce urgent ?</label>
            <textarea id="q11b" name="q11b" rows="2" placeholder="Ex: Impact direct sur satisfaction client, risque de non-conformitÃ©..."></textarea>
          </div>
        </section>

        <section class="step-section" data-step="4" aria-labelledby="bloc-4">
          <h2 id="bloc-4">4. Nature de la tÃ¢che</h2>

          <div class="form-group">
            <label for="q12">Q12. Quelles donnÃ©es numÃ©riques sont manipulÃ©es pendant la tÃ¢che ?</label>
            <p class="hint-examples">ğŸ’¡ Exemples : Fichiers Excel, bases de donnÃ©es, PDF, documents Word, images, fichiers papier scannÃ©s, audio, e-mails...</p>
            <textarea id="q12" name="q12" rows="3" placeholder="Ex: Fichiers Excel avec donnÃ©es clients, factures PDF, e-mails de confirmation"></textarea>
          </div>

          <fieldset class="form-group">
            <legend>Q13. La tÃ¢che inclut-elle une action manuelle ?</legend>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q13" value="Oui" /> Oui</label>
              <label><input type="radio" name="q13" value="Non" /> Non</label>
            </div>
          </fieldset>

          <div class="form-group">
            <label for="q13a">Q13a. Si oui, donnez un exemple d'action manuelle</label>
            <textarea id="q13a" name="q13a" rows="2" placeholder="Ex: Copier-coller de donnÃ©es entre Excel et SAP, vÃ©rification visuelle de cohÃ©rence, saisie manuelle de codes..."></textarea>
          </div>

          <fieldset class="form-group">
            <legend>Q14. La tÃ¢che peut-elle Ãªtre reproduite avec des rÃ¨gles simples et stables ?</legend>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q14" value="Oui" /> Oui â€” RÃ¨gles claires et stables</label>
              <label><input type="radio" name="q14" value="Partiellement" /> Partiellement â€” Quelques cas particuliers</label>
              <label><input type="radio" name="q14" value="Non" /> Non â€” Beaucoup d'exceptions, jugement mÃ©tier important</label>
            </div>
          </fieldset>

          <div class="form-group">
            <label for="q14a">Q14a. Si partiellement ou non, donnez un exemple de la rÃ¨gle/cas le plus complexe</label>
            <textarea id="q14a" name="q14a" rows="2" placeholder="Ex: Certains fournisseurs envoient des formats diffÃ©rents, nÃ©cessite validation manager si montant > 10kâ‚¬..."></textarea>
          </div>

          <fieldset class="form-group">
            <legend>Q15. ComplexitÃ© organisationnelle</legend>
            <p class="hint">La tÃ¢che nÃ©cessite-t-elle la coordination ou validation d'autres personnes ?</p>
            <div class="options" role="radiogroup">
              <label><input type="radio" name="q15" value="Simple" /> Simple â€” Une personne peut faire la tÃ¢che seule</label>
              <label><input type="radio" name="q15" value="Moyenne" /> Moyenne â€” NÃ©cessite une validation d'une autre personne</label>
              <label><input type="radio" name="q15" value="Complexe" /> Complexe â€” Coordination de plusieurs personnes/services</label>
            </div>
          </fieldset>

          <div class="form-group">
            <label for="q16">Q16. Quels sont les outils nÃ©cessaires pour rÃ©aliser cette tÃ¢che ?</label>
            <input type="text" id="q16" name="q16" placeholder="Ex: Excel + SAP + e-mails, Salesforce + Google Sheets..." />
          </div>
        </section>

        <section class="conformite meta-section" hidden>
          <h3>ConformitÃ© au cahier des charges</h3>
          <ul>
            <li>ğŸ§­ Structure standardisÃ©e â†’ 4 blocs clairs, identiques pour tous.</li>
            <li>ğŸ“Š CritÃ¨res comparables â†’ Ã‰chelles, fourchettes, cases Ã  cocher normalisÃ©es.</li>
            <li>ğŸ§® Scoring possible â†’ Temps, irritants, volumÃ©trie, impact structurÃ©s.</li>
            <li>ğŸ‘¤ Accessible terrain â†’ Formulation mÃ©tier + Â« Pourquoi Â».</li>
            <li>â³ Rapide Ã  remplir â†’ 21 questions max, majoritairement choix multiples.</li>
            <li>ğŸª« Mesure des irritants â†’ Q12 + Q13 dÃ©diÃ©es.</li>
            <li>ğŸš€ Actionnable delivery â†’ Parties prenantes + volumÃ©trie + coÃ»ts + impact.</li>
            <li>ğŸ§­ DÃ©cision rapide â†’ Go / No Go priorisable dÃ¨s rÃ©ception.</li>
          </ul>
        </section>

        <section class="retours meta-section" hidden>
          <h3>IntÃ©gration des retours Edith</h3>
          <ul>
            <li>âœ… Impact direct / indirect â†’ Q16</li>
            <li>âœ… Inversion Q14/Q15 pour logique impact â†’ gains</li>
            <li>âœ… CoÃ»ts directs / indirects â†’ Q17</li>
            <li>âœ… Formulaire orientÃ© diagnostic terrain â†’ pas stratÃ©gique lourd</li>
            <li>âœ… PrÃ©cision sur bÃ©nÃ©fices et portÃ©e â†’ Q14 enrichie</li>
          </ul>
        </section>

        <section class="step-section" data-step="5" aria-labelledby="bloc-5">
          <h2 id="bloc-5">ğŸ‘€ SynthÃ¨se</h2>

          <article class="panel recap">
            <h3>ğŸ§¾ RÃ©capitulatif</h3>
            <div id="recap-content" class="recap-content">
              <!-- Rendu dynamique -->
            </div>
          </article>

          <article class="panel editable-recap" hidden>
            <div class="ai-header">
              <h3>âœï¸ User Story & Validation</h3>
              <div class="ai-controls">
                <button type="button" id="generate-user-story" class="secondary">GÃ©nÃ©rer User Story</button>
              </div>
            </div>
            <div class="form-group">
              <label for="user-story">User Story Ã©ditable</label>
              <p class="hint">Format : "En tant que [rÃ´le], je veux [action] afin de [bÃ©nÃ©fice]"</p>
              <textarea id="user-story" name="user_story" rows="4" placeholder="En tant que gestionnaire de commandes, je veux automatiser la saisie des factures afin de rÃ©duire les erreurs et gagner 2h par jour."></textarea>
            </div>
            <div class="form-group">
              <label for="validation-notes">Notes de validation / Commentaires</label>
              <textarea id="validation-notes" name="validation_notes" rows="3" placeholder="Points Ã  valider, contraintes identifiÃ©es, prochaines Ã©tapes..."></textarea>
            </div>
          </article>

          <article class="panel ai" hidden>
            <div class="ai-header">
              <h3>ğŸ§  SynthÃ¨se IA</h3>
              <div class="ai-controls">
                <details>
                  <summary>âš™ï¸ ParamÃ¨tres IA (optionnels)</summary>
                  <div class="ai-settings">
                    <label for="ai-backend-url">Backend IA (proxy sÃ©curisÃ©)</label>
                    <input type="url" id="ai-backend-url" placeholder="http://localhost:5050/ai" />
                    <p class="hint">ClÃ© OpenAI stockÃ©e cÃ´tÃ© serveur. Voir README pour lancer le backend.</p>
                    <button type="button" id="ai-save-settings" class="ghost">Enregistrer paramÃ¨tres</button>
                  </div>
                </details>
                <button type="button" id="ai-synthese-btn" class="secondary">GÃ©nÃ©rer une synthÃ¨se</button>
              </div>
            </div>
            <div id="ai-synthese-output" class="ai-output rich" aria-live="polite"></div>
          </article>

          <div class="score-cards" hidden>
            <article class="score-card">
              <h3>ğŸª™ Score "Gains" <span class="small">/20</span></h3>
              <div class="metric"><span>Temps/CoÃ»ts (Q15â€“Q17)</span><span id="score-gains-tc">â€”</span></div>
              <div class="bar"><div id="bar-gains-tc" class="bar-fill" style="width:0%"></div></div>
              <div class="metric"><span>Impact (Q14)</span><span id="score-gains-impact">â€”</span></div>
              <div class="bar"><div id="bar-gains-impact" class="bar-fill" style="width:0%"></div></div>
              <div class="metric total"><span>Total</span><span id="score-gains">â€”</span></div>
            </article>

            <article class="score-card">
              <h3>âš¡ Irritants & Urgence <span class="small">/20</span></h3>
              <div class="metric"><span>Irritant (Q12)</span><span id="score-irr-q12">â€”</span></div>
              <div class="bar"><div id="bar-irr-q12" class="bar-fill" style="width:0%"></div></div>
              <div class="metric"><span>VolumÃ©trie (Q7â€“Q11)</span><span id="score-irr-vol">â€”</span></div>
              <div class="bar"><div id="bar-irr-vol" class="bar-fill" style="width:0%"></div></div>
              <div class="metric total"><span>Total</span><span id="score-irritants">â€”</span></div>
            </article>

            <article class="score-card">
              <h3>ğŸ§® FaisabilitÃ© <span class="small">/20</span></h3>
              <div class="metric"><span>CaractÃ©ristiques (Q13)</span><span id="score-fais-feat">â€”</span></div>
              <div class="bar"><div id="bar-fais-feat" class="bar-fill" style="width:0%"></div></div>
              <div class="metric"><span>SimplicitÃ© perÃ§ue</span><span id="score-fais-simp">â€”</span></div>
              <div class="bar"><div id="bar-fais-simp" class="bar-fill" style="width:0%"></div></div>
              <div class="metric total"><span>Total</span><span id="score-faisabilite">â€”</span></div>
            </article>

            <article class="score-card highlight">
              <h3>ğŸ Score Global PrioritÃ© <span class="small">/100</span></h3>
              <div class="metric mega"><span id="score-global">â€”</span></div>
              <div class="bar big"><div id="bar-global" class="bar-fill" style="width:0%"></div></div>
              <p class="badge" id="score-category">â€”</p>
            </article>
          </div>
          <p class="hint" hidden>Classes recommandÃ©es: ğŸŸ¢ Quick win Â· ğŸŸ¡ Ã€ challenger Â· ğŸ”´ Long shot</p>

          <article class="panel ai" hidden>
            <div class="ai-header">
              <h3>ğŸšš Delivery IA</h3>
              <div class="ai-controls">
                <button type="button" id="ai-delivery-btn" class="secondary">GÃ©nÃ©rer Delivery</button>
              </div>
            </div>
            <div id="ai-delivery-output" class="ai-output rich"></div>
          </article>
        </section>

        <div class="pager" role="navigation" aria-label="Navigation du formulaire">
          <button type="button" id="prev-step" class="ghost" onclick="window.goPrev()">â† PrÃ©cÃ©dent</button>
          <div class="spacer"></div>
          <button type="button" id="next-step" class="primary" onclick="window.goNext()">Suivant â†’</button>
        </div>

      </form>
    </main>

    <footer class="app-footer">
      <div class="container">
        <p>Â© 2025 Diagnostic Process â€” PrÃªt pour la priorisation automatisÃ©e des use cases ğŸš€</p>
      </div>
    </footer>

  </body>
  </html>


